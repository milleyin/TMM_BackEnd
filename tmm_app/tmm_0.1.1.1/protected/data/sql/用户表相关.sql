CREATE TABLE IF NOT EXISTS `tmm`.`tmm_user` (
  `id` INT(11) UNSIGNED NOT NULL AUTO_INCREMENT COMMENT '主键',
  `phone` VARCHAR(11) NOT NULL COMMENT '手机号(登录名) 唯一',
  `phone_type` int(11) NOT NULL DEFAULT '1' COMMENT '手机类型1=ios2=android',
  `password` VARCHAR(32) NOT NULL COMMENT '密码',
  `is_organizer` TINYINT(3) NOT NULL DEFAULT 0 COMMENT '是否是组织者',
  `audit` TINYINT(3) NOT NULL DEFAULT 0 COMMENT '组织者提交申请（0 没有提交 1 提交未审核，2审核未通过 3通过审核）',
  `nickname` VARCHAR(20) NULL COMMENT '昵称',
  `gender` TINYINT(3) UNSIGNED NOT NULL DEFAULT 0 COMMENT '性别(0、未知，1、男 2、女)',
  `icon` VARCHAR(100) NULL COMMENT '头像',
  `count` INT(11) UNSIGNED NOT NULL DEFAULT 0 COMMENT '登录次数',
  `login_token` varchar(128)   NULL DEFAULT '' COMMENT '推送TOKEN',
  `login_mac` varchar(128)   NULL DEFAULT '' COMMENT '当次登录MAC',
  `last_mac` varchar(128)   NULL DEFAULT '' COMMENT '最近登录MAC',
  `login_error` INT(11) UNSIGNED NOT NULL DEFAULT 0 COMMENT '登录错误次数 登录后清零',
  `error_count` INT(11) UNSIGNED NOT NULL DEFAULT 0 COMMENT '登录错误统计',
  `login_time` INT(10) UNSIGNED NOT NULL COMMENT '登录时间',
  `login_ip` VARCHAR(15) NULL COMMENT '登录ip',
  `login_address` VARCHAR(100) NULL COMMENT '登录地址',
  `last_time` INT(10) UNSIGNED NOT NULL COMMENT '上次登录时间',
  `last_ip` VARCHAR(15) NULL COMMENT '上次登录ip',
  `last_address` VARCHAR(100) NULL COMMENT '上次登录地址',
  `add_time` INT(10) UNSIGNED NOT NULL COMMENT '创建时间',
  `up_time` INT(10) UNSIGNED NOT NULL COMMENT '更新时间',
  `status` TINYINT(3) NOT NULL DEFAULT 1 COMMENT '记录状态',
  PRIMARY KEY (`id`),
  UNIQUE INDEX `phone_UNIQUE` (`phone` ASC))
ENGINE = InnoDB
COMMENT = '用户表(组织者)';

CREATE TABLE IF NOT EXISTS `tmm`.`tmm_organizer` (
  `id` INT(11) UNSIGNED NOT NULL COMMENT '主键id(不自增) 关联主表 user表主键id',
  `firm_name` VARCHAR(100) NOT NULL COMMENT '公司名称',
  `firm_phone` VARCHAR(20) NULL COMMENT '公司电话',
  `firm_postcode` VARCHAR(10) NULL COMMENT '公司邮编',
  `area_id_p` INT(11) UNSIGNED NOT NULL COMMENT '关联地名表(aera)主键id (p_id=0) 省(市)',
  `area_id_m` INT(11) UNSIGNED NOT NULL COMMENT '关联地名表(aera)主键id (p_id=t.area_id_p) 市(区)',
  `area_id_c` INT(11) UNSIGNED NOT NULL COMMENT '关联地名表(aera)主键id (p_id=t.area_id_m) 县(区)',
  `address` VARCHAR(100) NOT NULL COMMENT '详细地址',
  `law_name` VARCHAR(10) NULL COMMENT '法人名称',
  `law_identity` VARCHAR(18) NULL COMMENT '法人身份证号',
  `law_phone` VARCHAR(20) NULL COMMENT '法人电话',
  `bl_code` VARCHAR(45) NULL COMMENT '营业执照号码',
  `bl_img` VARCHAR(100) NULL COMMENT '营业执照图',
  `manage_name` VARCHAR(20) NOT NULL COMMENT '负责人名字',
  `manage_email` VARCHAR(100) NULL COMMENT '负责人邮箱地址',
  `manage_phone` VARCHAR(20) NOT NULL COMMENT '公司负责人联系方式',
  `manage_identity` VARCHAR(18) NOT NULL COMMENT '公司负责人身份证',
  `identity_begin` VARCHAR(100) NULL COMMENT '公司负责人身份证图片前',
  `identity_after` VARCHAR(100) NULL COMMENT '公司负责人身份证图片后',
  `identity_hand` VARCHAR(100) NULL COMMENT '公司负责人手持身份证图片(手)',
  `bank_id` int(11) unsigned NOT NULL COMMENT '开户银行',
  `bank_name` varchar(20) NOT NULL DEFAULT '' COMMENT '开户姓名', 
  `bank_branch` varchar(100) NOT NULL DEFAULT '' COMMENT '开户支行', 
  `bank_code` varchar(50) NOT NULL DEFAULT '' COMMENT '开户银行账号',
  `push` FLOAT(5,2) NOT NULL DEFAULT 0 COMMENT '分成比例 % 最大为100  ',
  `income_count` DECIMAL(13,2) NOT NULL DEFAULT 0.00 COMMENT '收益总额',
  `cash` DECIMAL(13,2) NOT NULL DEFAULT 0.00 COMMENT '已提现总额',
  `money` DECIMAL(13,2) NOT NULL DEFAULT 0.00 COMMENT '可用金额（可提现）',
  `deposit` DECIMAL(13,2) NOT NULL DEFAULT 0.00 COMMENT '保证金',
  `add_time` INT(10) UNSIGNED NOT NULL COMMENT '创建时间',
  `up_time` INT(10) UNSIGNED NOT NULL COMMENT '更新时间',
  `pass_time` INT(10) UNSIGNED NOT NULL COMMENT '通过时间',
  `status` TINYINT(3) NOT NULL DEFAULT 1 COMMENT '记录状态',
  PRIMARY KEY (`id`))
ENGINE = InnoDB
COMMENT = '组织者附表详细资料';

CREATE TABLE IF NOT EXISTS `tmm`.`tmm_retinue` (
  `id` INT(11) UNSIGNED NOT NULL AUTO_INCREMENT COMMENT '主键id',
  `user_id` INT(11) UNSIGNED NOT NULL COMMENT '归属用户',
  `name` VARCHAR(20) NOT NULL COMMENT '姓名',
  `gender` TINYINT(3) UNSIGNED NOT NULL DEFAULT 0 COMMENT '性别(0、未知，1、男 2、女)',
  `identity` VARCHAR(18) NOT NULL COMMENT '身份证号',
  `phone` VARCHAR(15) NOT NULL COMMENT '手机号码',
  `email` VARCHAR(100) NULL COMMENT '邮箱地址',
  `is_main` TINYINT(3) NOT NULL DEFAULT 0 COMMENT '是否是主要的联系人（0 不是1 是）',
  `add_time` INT(10) UNSIGNED NOT NULL COMMENT '创建时间',
  `up_time` INT(10) UNSIGNED NOT NULL COMMENT '更新时间',
  `status` TINYINT(3) NOT NULL DEFAULT 1 COMMENT '记录状态',
  PRIMARY KEY (`id`))
ENGINE = InnoDB
COMMENT = '随行人员';