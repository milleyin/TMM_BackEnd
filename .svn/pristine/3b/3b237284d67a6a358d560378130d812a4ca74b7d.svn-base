<?php
return array(	
// 	'session'=>array(
// 			'class'=>'CHttpSession',
// 	),
// 	'assetManager'=>array(
// 			'class'=>'CAssetManager',
// 	),
// 	'user'=>array(
// 			'class'=>'CWebUser',
// 	),
// 	'themeManager'=>array(
// 			'class'=>'CThemeManager',
// 	),
// 	'authManager'=>array(
// 			'class'=>'CPhpAuthManager',
// 	),
// 	'clientScript'=>array(
// 			'class'=>'CClientScript',
// 	),
// 	'widgetFactory'=>array(
// 			'class'=>'CWidgetFactory',
// 	),

	'request'=>array(
			'class'=>'CHttpRequest',
			'csrfTokenName'=>'PAD_CSRF',					//令牌验证的名字
			'csrfCookie'=>array('httpOnly'=>true),		//防止JS修改Cookie
			'enableCookieValidation'=>true, 					//Cookie
			'enableCsrfValidation'=>true,  						//post 验证
	),
	
	'format'=>array(
			'datetimeFormat'=>'Y/m/d H:i:s',  					//时间显示 Yii::app()->format->formatDate()
			'timeFormat'=>'Y/m/d',									//时间显示 Yii::app()->format->formatDatetime()
	),
	
	'session'=> array(
			'class'=>'CHttpSession',
			'cookieParams'=>array('httponly'=>true),	//防止JS修改Cookie
			'cookieMode'=>'only',									//保存SessionID 仅仅用Cookie的方式保存
			//	'timeout' =>1440,
	),
	
	'user'=>array(
			// enable cookie-based authentication
			'class'=>'FrontWebUser',
			'loginUrl'=>array('login/index'),
			'loginRequiredAjaxResponse'=>array('login/index'),
			'allowAutoLogin'=>true,
			'autoRenewCookie'=>true,							//自动登录的时候刷新Cooike的时间
			'identityCookie'=>array('httpOnly'=>true),	//防止JS修改Cookie			
	),
	//重写规则
	'urlManager'=>array(
	 		'urlFormat'=>'path',
	 		'showScriptName' => false, 	//去除index.php
	 		'appendParams'=>false,	   	//参数不重写
	 		'urlSuffix'=>'.html', 				//加上.html
	 		'rules'=>array(
	 				'<modules:\w+>/<controller:\w+>/<action:\w+>' => '<modules>/<controller>/<action>',
	 				'<controller:\w+>/<action:\w+>'=>'<controller>/<action>',
	 				//'http://pad.cn/'=>array('/admin', 'urlSuffix'=>'', 'caseSensitive'=>false),
	 				//'http://pad.cn/<controller:\w+>/<action:\w+>'=>array('/admin/<controller>/<action>', 'urlSuffix'=>'.html', 'caseSensitive'=>false),
	 				//admin 为一个模块
	 		),
	 ),

	// database settings are configured in database.php
	'db'=>require(dirname(__FILE__).'/database/database.php'),
	
	'errorHandler'=>array(
			// use 'site/error' action to display errors
			'errorAction'=>YII_DEBUG ? null : 'error/index',
			//'errorAction'=>'error/index',
	),
	
	'themeManager'=>array(
		'basePath'=>dirname(__FILE__) . '/../' . CThemeManager::DEFAULT_BASEPATH,
		//'baseUrl'=>,
	),
	
	'log'=>array(
			'class'=>'CLogRouter',
			'routes'=>array(
					array(
						'class'=>'FileLogRoute',
						'levels'=>'error, warning, info',
						'logFile'=> 'error/' . date('Y-m-d') . '.log',
					),
					// uncomment the following to show log messages on web pages
					/*
						array(
								'class'=>'CWebLogRoute',
						),
	*/
			),
	),
);